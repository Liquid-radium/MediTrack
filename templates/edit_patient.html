<!DOCTYPE html>
<html>
<head>
    <title>Edit Patient</title>
</head>
<body>
    <h1>Edit Patient</h1>
    <form id="editPatientForm">
        Patient ID: <input type="number" name="patient_id" required><br><br>
        Name: <input type="text" name="name"><br><br>
        Age: <input type="number" name="age"><br><br>
        Ward: <input type="number" name="ward"><br><br>
        <button type="submit">Edit Patient</button>
    </form>

    <div id="result"></div>

    <script>
    const form = document.getElementById("editPatientForm");
    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const pid = formData.get("patient_id");

        const data = {};
        if (formData.get("name")) data.name = formData.get("name");
        if (formData.get("age")) data.age = parseInt(formData.get("age"));
        if (formData.get("ward")) data.ward = parseInt(formData.get("ward"));

        const response = await fetch(`/edit_patient/${pid}`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        document.getElementById("result").innerText = JSON.stringify(result, null, 2);
    });
    </script>
</body>
</html>
