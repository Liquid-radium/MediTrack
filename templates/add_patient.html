<!DOCTYPE html>
<html>
<head>
    <title>Add Patient</title>
</head>
<body>
    <h1>Add New Patient</h1>
    <form id="addPatientForm">
        Name: <input type="text" name="name" required><br><br>
        Age: <input type="number" name="age" required><br><br>
        Ward: <input type="number" name="ward"><br><br>
        <button type="submit">Add Patient</button>
    </form>

    <div id="result"></div>

    <script>
    const form = document.getElementById("addPatientForm");
    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const data = {
            name: formData.get("name"),
            age: parseInt(formData.get("age")),
            ward: parseInt(formData.get("ward")) || null
        };

        const response = await fetch("/add_patient", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        document.getElementById("result").innerText = JSON.stringify(result, null, 2);
    });
    </script>
</body>
</html>
